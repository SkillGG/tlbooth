// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DB_ADMIN_URL")
}

enum LANG {
    PL
    EN
    JP
}

model Translation {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    oglang LANG
    tllang LANG

    Chapter   Chapter? @relation(fields: [chapterId], references: [id])
    chapterId String?  @db.ObjectId

    lines TextLine[]
}

model TextLine {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    pos    Int    @unique @default(0)
    tlline String
    ogline String

    fullText Translation @relation(fields: [textId], references: [id])
    textId   String      @db.ObjectId
}

model Novel {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    url String

    ogname String
    tlname String?

    chapters Chapter[]
}

model Chapter {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    url String

    ogname String?
    tlname String?

    Novel   Novel  @relation(fields: [novelId], references: [id])
    novelId String @db.ObjectId

    translations Translation[]
}
